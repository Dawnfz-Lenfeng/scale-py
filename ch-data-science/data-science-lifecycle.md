# 数据科学生命周期

数据科学主要围绕数据进行探索实验，一个数据科学项目涉及到很多步骤，比如数据准备、建模并部署到生产环境。如 {numref}`data-science-lifecycle` 所示， {cite}`shearer2000CRISPDM` 首次提出了一个业界标准 CRISP-DM（Cross-industry standard process for data mining），描述数据科学的生命周期。

```{figure} ../img/ch-data-science/data-science-lifecycle.png
---
width: 400px
name: data-science-lifecycle
---
数据科学生命周期
```

CRISP-DM 主要涉及六大部分：

* 理解业务
* 理解数据
* 准备数据
* 建模
* 验证
* 部署

## 理解业务

理解业务逻辑在任何项目的成功中起着非常重要的作用，因为数据科学最终目的是服务业务，任何数据相关探索都要围绕着业务目标展开。在进行具体的数据科学建模之前，数据分析师首先应该深入理解业务。比如，电商数据分析需要首先理解电商的内在逻辑，用户需求与公司商业目标，才能在后续建模分析中更好地服务用户与公司。

## 理解数据

在理解业务逻辑之后，下一步是理解数据。数据分析师需要与业务团队密切合作，了解该业务有哪些数据、哪些第三方数据。具体而言，数据分析师需要深入了解数据是如何生成的、数据的描述、数据类型和许多其他信息。这个阶段，数据分析师可能还需要进行探索性数据分析（Exploratory Data Analysis，EDA），通过查看数据的分布或者数据可视化，了解数据的基本情况。

## 准备数据

理解基本情况之后，生命周期中的下一个步骤是数据准备。这一步也被称为数据清洗（Data Cleaning）或数据整理（Data Wrangling）。这一步包括选择数据、多源数据的融合、清洗数据、删除不需要的列和特征、处理缺失值和异常值；通过特征工程从现有数据中构建新数据，派生新特征；将数据格式化为下一步所需的结构。数据准备是最耗时的步骤，它占整个项目时间的70%-90%，然而它是整个数据科学生命周期中最重要的步骤。

这一步也非常依赖探索性数据分析，识别数据的模式和异常值。对数据的洞察可以帮助找到正确的算法模型。

## 建模

建模被认为是数据分析的核心。建模一开前一步骤（数据准备）中准备好的数据作为输入。建模需要对业务问题本身进行提炼，确定当前的数据科学问题是分类问题、回归问题、聚类问题或者其他问题，选择一个模型处理数据。选择模型后，需要在各种算法中调整每个模型的超参数以实现所需的性能。

## 验证

在正式部署到生产系统之前，我们还需要通过验证模型的表现。有很多评估指标验证模型的效果，比如模型的准确性（即是否准确预测数据）。

## 部署

模型需要经过严格验证之后才能部署上线。在正式给所有用户使用之前，除了在离线测试之外，还可能进行线上灰度测试。离线测试，指的是只线下验证，基于历史数据，不将模型推送给线上用户；灰度测试，就是在该项目正式推送给全量用户前，选择特定人群试用，根据效果逐步扩大试用者数量，由“灰”到“黑”。如果灰度测试效果不佳，还需要继续迭代，重复上面的各个步骤。
如果数据收集不正确，或数据清洗不合理，或离线测试评估指标有问题，模型都无法取得较好的线上效果。

## 小结

以上各个步骤沟通构成了数据科学的生命周期，从 {numref}`data-science-lifecycle` 和文字解释中可以看到，数据科学是一个反复迭代的过程，不同步骤之间没有特别明显的界线。
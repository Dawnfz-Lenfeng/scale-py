<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>1.3. Python 性能瓶颈原因 &#8212; Python 分布式编程 1.0.0 documentation</title>

    <link rel="stylesheet" href="../_static/material-design-lite-1.3.0/material.blue-deep_orange.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_materialdesign_theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fontawesome/all.css" type="text/css" />
    <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/d2l.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/d2l.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.4. 本书主要内容" href="outline.html" />
    <link rel="prev" title="1.2. Python 数据科学生态" href="data-science.html" /> 
  </head>
<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-drawer"><header class="mdl-layout__header mdl-layout__header--waterfall ">
    <div class="mdl-layout__header-row">
        
        <nav class="mdl-navigation breadcrumb">
            <a class="mdl-navigation__link" href="index.html"><span class="section-number">1. </span>Python 编程语言</a><i class="material-icons">navigate_next</i>
            <a class="mdl-navigation__link is-active"><span class="section-number">1.3. </span>Python 性能瓶颈原因</a>
        </nav>
        <div class="mdl-layout-spacer"></div>
        <nav class="mdl-navigation">
        
<form class="form-inline pull-sm-right" action="../search.html" method="get">
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
        <label id="quick-search-icon" class="mdl-button mdl-js-button mdl-button--icon"  for="waterfall-exp">
          <i class="material-icons">search</i>
        </label>
        <div class="mdl-textfield__expandable-holder">
          <input class="mdl-textfield__input" type="text" name="q"  id="waterfall-exp" placeholder="Search" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </div>
      </div>
      <div class="mdl-tooltip" data-mdl-for="quick-search-icon">
      Quick search
      </div>
</form>
        
<a id="button-show-source"
    class="mdl-button mdl-js-button mdl-button--icon"
    href="../_sources/ch-python-lang/why-slow.rst.txt" rel="nofollow">
  <i class="material-icons">code</i>
</a>
<div class="mdl-tooltip" data-mdl-for="button-show-source">
Show Source
</div>
        </nav>
    </div>
    <div class="mdl-layout__header-row header-links">
      <div class="mdl-layout-spacer"></div>
      <nav class="mdl-navigation">
          
              <a  class="mdl-navigation__link" href="https://github.com/py-101/distributed-python">
                  <i class="fab fa-github"></i>
                  GitHub
              </a>
      </nav>
    </div>
</header><header class="mdl-layout__drawer">
    
          <!-- Title -->
      <span class="mdl-layout-title">
          <a class="title" href="../index.html">
              <span class="title-text">
                  Python 分布式编程
              </span>
          </a>
      </span>
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Python 编程语言</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python.html">1.1. Python 现状及历史</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-science.html">1.2. Python 数据科学生态</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.3. Python 性能瓶颈原因</a></li>
<li class="toctree-l2"><a class="reference internal" href="outline.html">1.4. 本书主要内容</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">1.5. 本章小结</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch-ray-core/index.html">2. Ray Core 简介</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch-ray-core/remote-task.html">2.1. 分布式函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-ray-core/object-store.html">2.2. 分布式对象存储</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">3. 参考文献</a></li>
</ul>

            </nav>
        
        </div>
    
</header>
        <main class="mdl-layout__content" tabIndex="0">

	<script type="text/javascript" src="../_static/sphinx_materialdesign_theme.js "></script>
    <header class="mdl-layout__drawer">
    
          <!-- Title -->
      <span class="mdl-layout-title">
          <a class="title" href="../index.html">
              <span class="title-text">
                  Python 分布式编程
              </span>
          </a>
      </span>
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Python 编程语言</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python.html">1.1. Python 现状及历史</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-science.html">1.2. Python 数据科学生态</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.3. Python 性能瓶颈原因</a></li>
<li class="toctree-l2"><a class="reference internal" href="outline.html">1.4. 本书主要内容</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">1.5. 本章小结</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch-ray-core/index.html">2. Ray Core 简介</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch-ray-core/remote-task.html">2.1. 分布式函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-ray-core/object-store.html">2.2. 分布式对象存储</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../refs.html">3. 参考文献</a></li>
</ul>

            </nav>
        
        </div>
    
</header>

    <div class="document">
        <div class="page-content" role="main">
        
  <div class="section" id="python">
<h1><span class="section-number">1.3. </span>Python 性能瓶颈原因<a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h1>
<p>Python 虽然被广泛使用，但却一直被诟病速度慢。主要由于以下几个原因：</p>
<ul class="simple">
<li><p>解释型语言</p></li>
<li><p>动态类型</p></li>
<li><p>全局解释器锁</p></li>
</ul>
<div class="section" id="id1">
<h2><span class="section-number">1.3.1. </span>解释型语言<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>Python 是一种解释型语言。Python
程序在运行时需要一个解释器将代码转换为机器能理解的语言。相比之下，像 C++
这样的编译型语言在程序运行之前就已经被编译为机器代码，这通常会导致更好的性能。</p>
<p>编译型语言先用编译器把源代码编译成可执行文件，然后再运行这个可执行文件。如果拿翻译来类比的话，编译型语言将稿子翻译好（用编译器把源代码编译成可执行文件），然后再直接拿过来读（运行可执行文件）。解释型语言没有编译的过程，直接可以运行源代码。如果拿翻译来类比的话，就像“同声传译”去翻译一段话，一边接受信息，一边翻译。</p>
</div>
<div class="section" id="id2">
<h2><span class="section-number">1.3.2. </span>动态类型<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>Python
是动态类型的语言。在编写源代码时，不需要给变量指定具体的类型（<code class="docutils literal notranslate"><span class="pre">int</span></code>、<code class="docutils literal notranslate"><span class="pre">float</span></code>
等），而且源代码中可随便切换变量的类型。这虽然方便了程序员编写代码，但却带来了额外的性能开销。解释器无法提前知道要进行的计算是什么类型的，直到运行时才能去检查类型，并调用背后相应的计算。类似的操作如果累积起来，会产生一定性能开销。相比之下，静态类型的语言如
C++，变量的类型在编译时就已经确定，无需运行时的类型检查等操作。</p>
</div>
<div class="section" id="id3">
<h2><span class="section-number">1.3.3. </span>全局解释器锁<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>Python 语言一个广为诟病的问题是全局解释器锁（Global Interpreter
Lock，GIL）。GIL使得很多 Python 代码无法充分利用现代 CPU
的多核，比如一些 pandas 操作无法充分使用多核。</p>
<p>GIL 是 CPython 中实现的一种同步机制，用来防止多个线程同时执行 Python
程序。CPython 是 Python 语言的默认实现，也是最广泛使用的实现。它是用 C
语言编写的，因此得名
CPython。当人们在没有特别指明的情况下谈论“Python”，通常是指
CPython。除了 CPython，还有一些其他的 Python 实现，如 Jython（用 Java
实现的 Python）、IronPython（用 .NET 实现的
Python）等。这些实现都遵循同样的 Python
语言规范，但可能在性能、兼容性和可用的库等方面有所不同。</p>
<p>GIL 名称中带 “锁” 这个字，也就是说它给多线程实现加了一把锁。GIL
这种机制确保了任何时候都只有一个线程在执行，从而避免了多线程之间的数据竞争和状态不一致的问题。然而，在当前主流的多核
CPU 处理器上，CPython
不能利用多个核心进行并行计算，这对于很多计算密集的应用来是一个瓶颈。</p>
<p>GIL 锁的问题严重拖累了机器学习等科学计算，例如 pandas
往往只能利用现代多核 CPU 的一个核心。</p>
<p>幸运的是，GIL 已经确定将在未来被移除出 CPython 。由于 Python
在人工智能领域的大规模应用，尤其是 PyTorch 极度依赖原生的 Python
实现，来自 Meta 的开发者提出了去除 GIL 的提案，并已经被 Python
社区接受。未来几年，Python 社区将分阶段逐步移除 GIL。</p>
</div>
</div>


        </div>
        <div class="side-doc-outline">
            <div class="side-doc-outline--content"> 
<div class="localtoc">
    <p class="caption">
      <span class="caption-text">Table Of Contents</span>
    </p>
    <ul>
<li><a class="reference internal" href="#">1.3. Python 性能瓶颈原因</a><ul>
<li><a class="reference internal" href="#id1">1.3.1. 解释型语言</a></li>
<li><a class="reference internal" href="#id2">1.3.2. 动态类型</a></li>
<li><a class="reference internal" href="#id3">1.3.3. 全局解释器锁</a></li>
</ul>
</li>
</ul>

</div>
            </div>
        </div>

      <div class="clearer"></div>
    </div><div class="pagenation">
     <a id="button-prev" href="data-science.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="P">
         <i class="pagenation-arrow-L fas fa-arrow-left fa-lg"></i>
         <div class="pagenation-text">
            <span class="pagenation-direction">Previous</span>
            <div>1.2. Python 数据科学生态</div>
         </div>
     </a>
     <a id="button-next" href="outline.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="N">
         <i class="pagenation-arrow-R fas fa-arrow-right fa-lg"></i>
        <div class="pagenation-text">
            <span class="pagenation-direction">Next</span>
            <div>1.4. 本书主要内容</div>
        </div>
     </a>
  </div>
        
        </main>
    </div>
  </body>
</html>